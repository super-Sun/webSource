<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /**
     * 当调用一个 async 函数时，会返回一个 Promise 对象。当这个 async 函数返回一个值时，
     * Promise 的 resolve 方法会负责传递这个值；当 async 函数抛出异常时，Promise 的 reject 方法也会传递这个异常值。
     * async 函数中可能会有 await 表达式，这会使 async 函数暂停执行，等待 Promise  的结果出来，然后恢复async函数的执行并返回解析值（resolved）。
     * 注意， await 关键字仅仅在 async function中有效。如果在 async function函数体外使用 await ，你只会得到一个语法错误（SyntaxError）
     */
    // 浏览器支持比较差------- ES2017
    function resolveAfter2Seconds () {
        return new Promise(function (resolve) {
            setTimeout(function () {
                resolve('done')
            }, 2000)
        })
    }

    async function asyncCall() {
        console.log('calling');

        var result = await resolveAfter2Seconds();

        console.log(result);
    }
    console.log('calling2');
    asyncCall();
    console.log('calling3');
</script>
</body>
</html>